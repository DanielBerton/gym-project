{% extends "base.html" %}
 {% block pagebody %}

 <!-- <form method ="post" action="/">
    <button type="submit" name="submit_a" value="submit_a"> Submit_a </button>
    <button type="submit" name="submit_b" value="submit_b"> Submit_b </button>
  </form>  -->
    
    <h5 class="m-2">Sala pesi</h5>
    <!-- <h5 class="m-2">Sala pesi <h5> -->
    <!-- Start calendar --> 
    <div class="container">
        <div class="row">
            {% for day in days %}
                <div class="col-sm">
            
                    {{ day.day_name }}
                    {{ day.day }} {{ day.month }}

                   
                    {% for slot in slots %}
                             {# 
                                <!-- check if slot is the same day of calendar -->
                            #}
                            {% if slot.day == day.day %}
                                <!-- check if the slot is booked from current user -->
                                
                                {% if slot.id in bookings  %}

                                <div class="card pb-10" style="width: 14rem;">
                                    <img class="card-img-top" src="static/img/gym.jpeg" alt="Gym image">
                                    <div class="card-body">
                                      <h5 class="card-title">Slot temporale disdici</h5>
                                      <p class="card-text">Fascia oraira</p>
                                      <p>Posti: {{ slot.places }}</p>
                                      <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>
                                      <form action="/select_slot" method="GET" >
                                        <button type="submit" name="slot_id" id="slot_id" value="{{slot.id}}" class="{{ 'btn-danger' if slot.places < 1 else 'btn-warning' }} btn">
                                            Rimuovi
                                        </button>
                                      </form>
                        
                                    </div>
                                </div>
                                
                                
                                
                                {#
                                    <button type="button" name="slot_id" id="slot_id" value="{{slot.id}}" class="btn btn-primary booked_slot" data-toggle="modal" data-target="#exampleModalLong">
                                        <p><b>Slot temporale annulla</b></p>
                                        Posti: {{ slot.places }}
                                        <p>Fascia oraira</p>
                                        <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>  
                                    </button>
                                    
                                    <!-- Modal -->
                                    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    ...
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="button" class="btn btn-primary">Save changes</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    #}


                                {% else %}

                                {#
                                    <form action="/select_slot" method="GET" >
                                        <button type="submit" name="slot_id" id="slot_id" value="{{slot.id}}" class="{{ 'full_slot' if slot.places < 1 else 'free_slot' }}">
                                            <p><b>Slot temporale prenota</b></p>
                                            Posti: {{ slot.places }}
                                            <p>Fascia oraira</p>
                                            <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>            
                                        </button>
                                    </form>
                                    #}


                                <div class="card pb-10" style="width: 14rem;">
                                    <img class="card-img-top" src="static/img/gym.jpeg" alt="Gym image">
                                    <div class="card-body">
                                      <h5 class="card-title">Slot temporale annulla</h5>
                                      <p class="card-text">Fascia oraira</p>
                                      <p>Posti: {{ slot.places }}</p>
                                      <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>
                                      <form action="/select_slot" method="GET" >
                                        <button type="submit" name="slot_id" id="slot_id" value="{{slot.id}}" class="{{ 'btn-danger' if slot.places < 1 else 'btn-success' }} btn">
                                            Prenota
                                        </button>
                                      </form>
                        
                                    </div>
                                </div>
                                {% endif %} 
                            {% endif %} 
                        
                {% endfor %}
                <!-- end for slots -->
            </div>
            {% endfor %} 
            <!-- end for days -->
        </div>
      </div>
    </body>

{% endblock %}