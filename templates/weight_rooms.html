{% extends "base.html" %}
 {% block pagebody %}

 <!-- <form method ="post" action="/">
    <button type="submit" name="submit_a" value="submit_a"> Submit_a </button>
    <button type="submit" name="submit_b" value="submit_b"> Submit_b </button>
  </form>  -->
    
    <h5 class="m-2">Sala pesi</h5>
    <!-- <h5 class="m-2">Sala pesi <h5> -->
    <!-- Start calendar --> 
    <div class="container">
        <div class="row">
            {% for day in days %}
                <div class="col-sm">
            
                    {{ day.day_name }}
                    {{ day.day }} {{ day.month }}

                   
                    {% for slot in slots %}
                             {# 
                                <!-- check if slot is the same day of calendar -->
                            #}
                            {% if slot.day == day.day %}
                                <!-- check if the slot is booked from current user -->
                                
                                {% if slot.id in bookings  %}
                                <form action="/select_slot" method="GET" >
                                    <button type="submit" name="slot_id" id="slot_id" value="{{slot.id}}" class="booked_slot">
                                        <p><b>Slot temporale annulla</b></p>
                                        Posti: {{ slot.places }}
                                        <p>Fascia oraira</p>
                                        <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>            
                                    </button>
                                </form>
                                {% else %}
                                <form action="/select_slot" method="GET" >
                                    <button type="submit" name="slot_id" id="slot_id" value="{{slot.id}}" class="{{ 'full_slot' if slot.places < 1 else 'free_slot' }}">
                                        <p><b>Slot temporale prenota</b></p>
                                        Posti: {{ slot.places }}
                                        <p>Fascia oraira</p>
                                        <p>{{ slot.hourFrom }} - {{ slot.hourTo }} </p>            
                                    </button>
                                </form>
                                {% endif %} 
                            {% endif %} 
                        
                {% endfor %}
                <!-- end for slots -->
            </div>
            {% endfor %} 
            <!-- end for days -->
        </div>
      </div>
    </body>

    <form action="/logout" method="POST">
        Logout 
        <input type="submit">
    </form>
{% endblock %}